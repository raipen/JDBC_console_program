<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>호반우 런</title>
    <link rel="stylesheet" href="GameManager/gmMain.css">
</head>
<body>
<div style="margin-left: 5%; margin-top:5%;">
    <h1>호반우 런</h1>
</div>
<!-- signup.jsp에 로그인 요청, 성공시 chracter.html로, 실패시 사유 출력 -->
<div style="margin-left: 3%;">
    <form class="btn-two large" style="color:black;">
        <label for="id">아이디</label>
        <input type="text" name="id" id="id"/><br/>
        <label for="pw">비밀번호</label>
        <input type="password" name="pw" id="pw"/><br/>
        <input type="submit" class="btn-two green small" value="회원가입"/>
    </form>
</div>

<script>
    document.querySelector("form").addEventListener("submit", function (e) {
        e.preventDefault();
        var id = document.querySelector("input[name=id]").value;
        var pw = document.querySelector("input[name=pw]").value;
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "apis/signup.jsp");
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.send(JSON.stringify({id: id, pw: pw}));
        xhr.addEventListener("load", function () {
            var result = JSON.parse(xhr.responseText);
            if (result.result) {
                location.href = "LoginedUserPage.html";
            } else {
                alert(result.message);
            }
        });
    });
</script>
</body>
</html>