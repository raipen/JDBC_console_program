<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>호반우 런</title>
    <link rel="stylesheet" href="userControl.css">
</head>
<body>
    <div id="left">
        
    </div>
    <div id="right">

    </div>
    <script type='module'>
        import {get_cookie,ajax} from '../game/js/utils.js';
        const getCharacterList = async () => {
            const result = await ajax('../apis/getUserList.jsp', {});
            console.log(result);
            const left = document.querySelector('#left');
            let html = '';
            for(let i=0; i<result.length; i++)
                html += `<div class="button">${result[i].id}</div>`;
            left.innerHTML = html;

            const buttons = document.querySelectorAll('.button');
            for(let i=0; i<buttons.length; i++)
                buttons[i].addEventListener('click', async (e) => {
					console.log("asdf");
                    const userId = e.target.innerHTML;
                    const right = document.querySelector('#right');
                    const result = await ajax('../apis/getCharacterList.jsp', {id:userId});
                    let html = '';
                    for(let i=0; i<result.length; i++)
                        html += `<div class="button">${result[i].characterName}</div>`;
                    console.log(result);
                    console.log(right);
                    right.innerHTML = html;
                });
        }
        getCharacterList();
    </script>
</body>
</html>